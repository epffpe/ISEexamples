KCPSM3 Assembler log file for program 'prog_rom.psm'.
Generated by KCPSM3 version 1.30
Ken Chapman (Xilinx Ltd) 2005.
21Feb2007-15:20:15

 Addr Code

 000                         CONSTANT Port_A, 00                         ;ENTRADA SWITCHES
 000                         CONSTANT UART_read_port, 01                 ;ENTRADA UART
 000                         CONSTANT UART_status_port, 02               ;ENTRADA ESTADO UART
 000                         CONSTANT UART_write_port, 01                ;Salida UART
 000                         CONSTANT STATUS_port, 02
 000                         CONSTANT tx_half_full, 01                   ;Transmisor half full - bit0
 000                         CONSTANT tx_full, 02                        ;  FIFO       full - bit1
 000                         CONSTANT rx_half_full, 04                   ;Receptor half full - bit2
 000                         CONSTANT rx_full, 08                        ;h(08)=b(00001000)   full - bit3
 000                         CONSTANT rx_data_present, 10                ;    data present   - bit4
 000                         ;
 000                         ;Registros Utilizados
 000                         ;
 000                         NAMEREG sF, UART_data
 000                         NAMEREG sE, UART_status
 000                         NAMEREG s0, LEDS
 000                         NAMEREG s1, RXTX
 000                         ;
 000  00000          Inicio: LOAD LEDS[s0], 00
 001  00E00                  LOAD UART_status[sE], 00
 002  00F00                  LOAD UART_data[sF], 00
 003  00100                  LOAD RXTX[s1], 00
 004  2C102                  OUTPUT RXTX[s1], STATUS_port[02]
 005  30008                  CALL loop_leds[008]
 006  3000B                  CALL read_from_UART[00B]
 007                         ;CALL send_to_UART
 007  34000                  JUMP Inicio[000]
 008                         ;
 008                         ;
 008  04000       loop_leds: INPUT LEDS[s0], Port_A[00]
 009  2C000                  OUTPUT LEDS[s0], Port_A[00]
 00A  2A000                  RETURN
 00B                         ;
 00B  04E02  read_from_UART: INPUT UART_status[sE], UART_status_port[02]
 00C  12E10                  TEST UART_status[sE], rx_data_present[10]
 00D  3540F                  JUMP NZ, read_character[00F]
 00E  2A000                  RETURN
 00F  00102  read_character: LOAD RXTX[s1], 02
 010  2C102                  OUTPUT RXTX[s1], STATUS_port[02]
 011  04F01                  INPUT UART_data[sF], UART_read_port[01]
 012                         ;LOAD RXTX, 00
 012                         ;OUTPUT RXTX, STATUS_port
 012  30014                  CALL send_to_UART[014]
 013  2A000                  RETURN
 014                         ;
 014  04E02    send_to_UART: INPUT UART_status[sE], UART_status_port[02]
 015  12E02                  TEST UART_status[sE], tx_full[02]
 016  35018                  JUMP Z, UART_write[018]
 017  2A000                  RETURN
 018  00101      UART_write: LOAD RXTX[s1], 01
 019  2C102                  OUTPUT RXTX[s1], STATUS_port[02]
 01A  2CF01                  OUTPUT UART_data[sF], UART_write_port[01]
 01B                         ;LOAD RXTX, 00
 01B                         ;OUTPUT RXTX, STATUS_port
 01B  2A000                  RETURN
